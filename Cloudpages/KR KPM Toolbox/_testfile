<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AMPscript Dynamic Links (Hidden)</title>
    <style>
        .duplicate {
            color: red;
            font-weight: bold;
        }
        #ampLinks {
            display: none; /* Hide AMPscript output */
        }
    </style>
</head>
<body>

    <!-- AMPscript Output, Hidden -->
    <div id="ampLinks">
        %%=Concat(lookupRows('YourDataExtension', 'ColumnName', 'Value'),'<br>')=%%
    </div>

    <div id="linkOutput"></div>

    <script>
        function displayLinks() {
            let ampLinksDiv = document.getElementById("ampLinks");
            let rawLinks = ampLinksDiv.innerHTML.trim(); // Get AMPscript-generated content
            let linksArray = rawLinks.split("<br>").map(link => link.trim()); // Split by line break
            let outputDiv = document.getElementById("linkOutput");
            let seenLinks = new Map();

            outputDiv.innerHTML = ""; // Clear previous entries

            linksArray.forEach(link => {
                if (link !== "") {
                    let p = document.createElement("p");

                    // Check for duplicates
                    if (seenLinks.has(link)) {
                        p.classList.add("duplicate");
                    } else {
                        seenLinks.set(link, true);
                    }

                    p.textContent = link;
                    outputDiv.appendChild(p);
                }
            });
        }

        // Run function on page load
        window.onload = displayLinks;
    </script>

</body>
</html>